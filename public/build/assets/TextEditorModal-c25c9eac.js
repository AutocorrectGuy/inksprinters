import{j as e,r as c}from"./app-851ba254.js";import{k as d,Q as i}from"./ReactToastify-3b0d88db.js";import{a as p}from"./index-6f82823d.js";import{F as x}from"./index.es-b6ae1d39.js";import m from"./TextEditorOptions-6b742d8f.js";import u from"./MonacoEditor-f64a4b6f.js";import{a as f}from"./ExcelToTextContext-f0c0a14b.js";const h={position:"top-right",autoClose:3e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!1,progress:void 0,theme:"dark"},g=()=>e.jsx(d,{position:"top-right",autoClose:5e3,hideProgressBar:!0,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!1,draggable:!1,pauseOnHover:!0,theme:"dark",style:{zIndex:9999}}),b=g,j=async(o,t)=>{try{const a=(await(await fetch("/api/download-encoded-text-file",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:o,encoding:t})})).json()).fileName,s=document.createElement("a");s.href=`/storage/${a}`,s.download=a,s.click()}catch(n){console.error("Error during file download:",n)}},T=(o,t)=>{const n=o.lineSpacing==="none"?1:2;return o.textWrap?t.map(r=>r.replace(/[\r\n]+/g," ")).join(`
`.repeat(n)):t.join(`
`.repeat(n))},w=o=>{navigator.clipboard.writeText(o).then(()=>i.success("Text copied to clipboard!")).catch(t=>i.error(`Failed to copy text: 
${t}`,h))},C=({modalRef:o})=>{const{excelText:t,setExcelText:n,inputText:r,setInputText:a,settings:s}=c.useContext(f);c.useEffect(()=>{t&&a(()=>T(s,t))},[t,s.textWrap,s.lineSpacing]);const l=()=>{n(()=>(o.current.close(),null))};return e.jsx(e.Fragment,{children:e.jsxs("dialog",{ref:o,className:"modal",children:[e.jsxs("div",{className:"modal-box text-left max-w-4xl overflow-hidden",children:[e.jsx("form",{method:"dialog",children:e.jsx("button",{className:"btn btn-sm btn-circle btn-ghost absolute right-4 mt-4 top-1",tabIndex:7,onClick:()=>l(),children:e.jsx(x,{icon:p,className:"w-8 h-8"})})}),e.jsxs("div",{className:"h-full grid grid-cols-7",children:[e.jsx("div",{className:"col-span-2 text-center flex items-center justify-center font-bold pb-4",children:"Text options"}),e.jsx("div",{className:"col-span-5 text-center flex items-center justify-center font-bold pb-4",children:"Text preview"}),e.jsx(m,{handleCopy:()=>w(r),handleDownload:()=>j(r,s.textEncoding)}),e.jsx("div",{className:"flex flex-col grow pl-4 col-span-5 h-hull",children:e.jsx(u,{})})]})]}),e.jsx("form",{method:"dialog",className:"modal-backdrop bg-black bg-opacity-80 min-h-screen",onClick:()=>l(),children:e.jsx("button",{tabIndex:-1,children:"close"})}),e.jsx(b,{})]})})},F=Object.freeze(Object.defineProperty({__proto__:null,default:C},Symbol.toStringTag,{value:"Module"}));export{b as C,C as T,F as a,h as c};
