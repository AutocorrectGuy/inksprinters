import{r as p,j as n}from"./app-e2877b50.js";import{F as b,f as y,c as N,d as f}from"./index-4aaaf61c.js";import{u as v,t as g}from"./ExcelToTextContext-d22aef8b.js";import{c as S}from"./collectForeignCharacters-97d77e93.js";let m;const k=new Uint8Array(16);function C(){if(!m&&(m=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!m))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return m(k)}const s=[];for(let e=0;e<256;++e)s.push((e+256).toString(16).slice(1));function E(e,t=0){return s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]}const I=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),j={randomUUID:I};function D(e,t,a){if(j.randomUUID&&!t&&!e)return j.randomUUID();e=e||{};const o=e.random||(e.rng||C)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,t){a=a||0;for(let l=0;l<16;++l)t[a+l]=o[l];return t}return E(o)}const w=({items:e,selectedItem:t,onSelect:a,width:o=100,label:l})=>{var x;p.useState(D());const[d,r]=p.useState(!1),i=p.useRef(null),u=()=>r(!d);return p.useEffect(()=>{const c=h=>{i.current&&!i.current.contains(h.target)&&r(!1)};return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[]),n.jsxs("div",{ref:i,className:`${l?"group flex cursor-pointer items-center justify-between rounded-lg bg-base-300":""}`,onClick:u,style:{width:o},children:[l&&n.jsx("div",{className:"px-3 py-2",children:l}),n.jsxs("div",{className:"relative inline-block text-left",children:[n.jsxs("button",{className:"btn flex items-center justify-center whitespace-nowrap px-3 text-xs hover:bg-base-100 group-hover:bg-base-100",children:[n.jsx("p",{className:"whitespace-nowrap pr-1",children:t}),n.jsx(b,{icon:y,className:"h-3 w-3"})]}),d&&n.jsx("div",{className:"absolute right-0 z-10 mt-1 rounded-md bg-base-200 shadow-lg shadow-neutral-900",style:{width:(x=i.current)==null?void 0:x.offsetWidth},children:n.jsx("ul",{className:"py-2 text-sm",children:e.map((c,h)=>n.jsx("li",{onClick:()=>{a(c),r(!1)},className:"block p-2 hover:bg-base-100",children:c},`tailwindcss-dropdown-item-${h}`))})})]})]})},U=({defaultChecked:e,onChange:t,labelText:a,width:o})=>n.jsx("div",{className:"form-control items-center justify-center rounded-lg bg-base-300 px-2 py-1",style:{width:o},children:a?n.jsxs("label",{className:"label flex w-full cursor-pointer items-center justify-between",children:[n.jsx("div",{className:"label-text pr-2 text-sm",children:a}),n.jsx("input",{type:"checkbox",defaultChecked:e,onChange:t,className:"checkbox bg-base-200"})]}):n.jsx("input",{type:"checkbox",defaultChecked:e,onChange:t,className:"checkbox bg-base-200"})}),F=({handleCopy:e,handleDownload:t})=>{const{appSettings:a,setAppSettings:o,foreignChars:l,setForeignChars:d,editorText:r}=v(),i=()=>o(c=>({...a,textWrap:!c.textWrap})),u=c=>o({...a,lineSpacing:c}),x=c=>{o({...a,textEncoding:c}),d(S(r,c))};return n.jsxs("div",{className:"col-span-2 flex h-full w-60 flex-col justify-between gap-2 border-r-2 border-r-base-200 pr-3 text-sm",children:[n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx(U,{defaultChecked:a.textWrap,onChange:i,labelText:"Wrap text",width:"100%"}),n.jsx(w,{label:"Line spacing",items:g.lineSpacing,selectedItem:a.lineSpacing,onSelect:c=>u(c),width:"100%"}),n.jsx(w,{label:"Encoding",items:g.textEncoding,selectedItem:a.textEncoding,onSelect:c=>x(c),width:"100%"})]}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsxs("button",{className:"btn btn-md",tabIndex:5,onClick:e,children:[n.jsx("p",{className:"pr-2",children:"Copy to clipboard"}),n.jsx(b,{icon:N,className:"h-5 w-5 text-gray-400"})]}),Object.keys(l).length?n.jsx("button",{className:"btn btn-disabled btn-md text-gray-300",disabled:!0,children:"Download not available due to foreign characters"}):n.jsxs("button",{className:"btn btn-md",tabIndex:6,onClick:Object.keys(l).length?()=>{}:t,children:[n.jsx("div",{className:"pr-2",children:"Download .txt file"}),n.jsx(b,{icon:f,className:"h-5 w-5 text-gray-400"})]})]})]})};export{F as default};
