import{j as e,r as c}from"./app-3acad420.js";import{k as d,Q as i}from"./ReactToastify-69fcadc6.js";import{a as p}from"./index-6f82823d.js";import{F as x}from"./index.es-6926f58b.js";import m from"./TextEditorOptions-beeb0284.js";import u from"./MonacoEditor-440e0d35.js";import{a as h}from"./ExcelToTextContext-5ebb7887.js";const f={position:"top-right",autoClose:3e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!1,progress:void 0,theme:"dark"},b=()=>e.jsx(d,{position:"top-right",autoClose:5e3,hideProgressBar:!0,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!1,draggable:!1,pauseOnHover:!0,theme:"dark",style:{zIndex:9999}}),g=b,j=async(n,o)=>{try{const r=await fetch("/api/download-encoded-text-file",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:n,encoding:o})});if(!r.ok)throw new Error("Network response was not ok");const s=await r.blob(),a=window.URL.createObjectURL(s),t=document.createElement("a");t.href=a,t.download="download.txt",document.body.appendChild(t),t.click(),window.URL.revokeObjectURL(a),document.body.removeChild(t)}catch(r){console.error("Error during file download:",r)}},w=(n,o)=>{const r=n.lineSpacing==="none"?1:2;return n.textWrap?o.map(s=>s.replace(/[\r\n]+/g," ")).join(`
`.repeat(r)):o.join(`
`.repeat(r))},T=n=>{navigator.clipboard.writeText(n).then(()=>i.success("Text copied to clipboard!")).catch(o=>i.error(`Failed to copy text: 
${o}`,f))},C=({modalRef:n})=>{const{excelText:o,setExcelText:r,inputText:s,setInputText:a,settings:t}=c.useContext(h);c.useEffect(()=>{o&&a(()=>w(t,o))},[o,t.textWrap,t.lineSpacing]);const l=()=>{r(()=>(n.current.close(),null))};return e.jsx(e.Fragment,{children:e.jsxs("dialog",{ref:n,className:"modal",children:[e.jsxs("div",{className:"modal-box text-left max-w-4xl overflow-hidden",children:[e.jsx("form",{method:"dialog",children:e.jsx("button",{className:"btn btn-sm btn-circle btn-ghost absolute right-4 mt-4 top-1",tabIndex:7,onClick:()=>l(),children:e.jsx(x,{icon:p,className:"w-8 h-8"})})}),e.jsxs("div",{className:"h-full grid grid-cols-7",children:[e.jsx("div",{className:"col-span-2 text-center flex items-center justify-center font-bold pb-4",children:"Text options"}),e.jsx("div",{className:"col-span-5 text-center flex items-center justify-center font-bold pb-4",children:"Text preview"}),e.jsx(m,{handleCopy:()=>T(s),handleDownload:()=>j(s,t.textEncoding)}),e.jsx("div",{className:"flex flex-col grow pl-4 col-span-5 h-hull",children:e.jsx(u,{})})]})]}),e.jsx("form",{method:"dialog",className:"modal-backdrop bg-black bg-opacity-80 min-h-screen",onClick:()=>l(),children:e.jsx("button",{tabIndex:-1,children:"close"})}),e.jsx(g,{})]})})},L=Object.freeze(Object.defineProperty({__proto__:null,default:C},Symbol.toStringTag,{value:"Module"}));export{g as C,C as T,L as a,f as c};
